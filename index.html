<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <title>ç‘„æŸ”çš„å°ˆå±¬ç¶²ç«™ Â· Ultra Max Edition</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="theme-color" content="#355f35">

    <style>
        /* ===========================
           GLOBAL RESET & VARIABLES
        =========================== */
        :root {
            --primary: #355f35;
            --secondary: #4a7c4a;
            --accent: #8fb88f;
            --text: #4f6f4f;
            --bg-glass: rgba(255, 255, 255, 0.75);
            --shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
            --blur: blur(16px);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html { scroll-behavior: smooth; }
        body {
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif;
            background-color: #f0f5f0;
            overflow-x: hidden;
            color: var(--text);
            transition: background 0.5s, color 0.5s;
        }

        /* ===========================
           LOADING SCREEN
        =========================== */
        #loading-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0f160f; display: flex; flex-direction: column;
            justify-content: center; align-items: center; z-index: 10000;
            transition: opacity 1.2s ease, visibility 1.2s;
        }
        #loading-title {
            color: #d6f5d6; font-size: 2rem; letter-spacing: 3px;
            opacity: 0; animation: fadeInText 2.5s ease forwards;
        }
        #loading-sub {
            color: #9fcf9f; margin-top: 16px; font-size: 1rem;
            opacity: 0; animation: fadeInSub 3s ease forwards;
        }
        .fade-out { opacity: 0; visibility: hidden; pointer-events: none; }

        @keyframes fadeInText { 0% { opacity: 0; transform: translateY(20px); } 50%, 100% { opacity: 1; transform: translateY(0); } }
        @keyframes fadeInSub { 0% { opacity: 0; } 100% { opacity: 1; } }

        /* ===========================
           BACKGROUND EFFECTS
        =========================== */
        #dynamic-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; }
        .fog-layer {
            position: absolute; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(190,220,190,0.18) 0%, rgba(120,150,120,0) 70%);
            animation: fogMove 35s ease-in-out infinite;
        }
        @keyframes fogMove { 0%, 100% { transform: translate(-10%, -10%); } 50% { transform: translate(5%, 5%); } }
        
        .particle {
            position: absolute; background: rgba(255,255,255,0.6); border-radius: 50%;
            pointer-events: none; animation: floatParticle linear infinite;
        }
        @keyframes floatParticle { 0% { transform: translateY(0) scale(1); opacity: 0.8; } 100% { transform: translateY(-100vh) scale(0.5); opacity: 0; } }

        /* ===========================
           NAVIGATION
        =========================== */
        nav {
            position: fixed; width: 100%; top: 0; left: 0; padding: 16px 32px;
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(255, 255, 255, 0.6); backdrop-filter: var(--blur);
            z-index: 900; box-shadow: 0 2px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }
        .logo { font-size: 1.25rem; font-weight: 800; color: var(--primary); letter-spacing: 1px; }
        .links { display: flex; gap: 24px; }
        .nav-link { text-decoration: none; color: #2f4f2f; font-weight: 600; position: relative; transition: 0.3s; }
        .nav-link::after {
            content: ''; position: absolute; width: 0; height: 2px; bottom: -4px; left: 0;
            background: var(--secondary); transition: width 0.3s;
        }
        .nav-link:hover::after { width: 100%; }
        
        /* Mobile Menu */
        .hamburger { display: none; font-size: 1.8rem; cursor: pointer; color: var(--primary); }
        #mobile-menu {
            position: absolute; top: 70px; right: 20px; background: rgba(255,255,255,0.95);
            padding: 20px; border-radius: 12px; box-shadow: var(--shadow);
            display: none; flex-direction: column; gap: 15px; text-align: center;
            backdrop-filter: blur(20px);
        }
        #mobile-menu.active { display: flex; animation: menuPop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes menuPop { from { opacity: 0; transform: scale(0.8) translateY(-10px); } to { opacity: 1; transform: scale(1) translateY(0); } }

        @media(max-width: 820px) {
            .links { display: none; }
            .hamburger { display: block; }
            nav { padding: 16px 20px; }
        }

        /* ===========================
           COMMON COMPONENTS
        =========================== */
        section { padding: 60px 20px; position: relative; max-width: 1200px; margin: 0 auto; }
        .section-title {
            text-align: center; font-size: 1.8rem; font-weight: 800; color: var(--primary);
            margin-bottom: 40px; position: relative; display: inline-block; left: 50%; transform: translateX(-50%);
        }
        .section-title::before { content: "ğŸŒ¿"; margin-right: 8px; font-size: 1.4rem; vertical-align: middle; }
        
        .card {
            background: var(--bg-glass); backdrop-filter: var(--blur);
            border-radius: 20px; padding: 30px; box-shadow: var(--shadow);
            margin: 0 auto 40px; max-width: 800px; line-height: 1.8;
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid rgba(255,255,255,0.3);
        }
        .card:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(50, 90, 50, 0.15); }

        /* Fade In Animation */
        .fade { opacity: 0; transform: translateY(30px); transition: all 1s ease; }
        .fade.show { opacity: 1; transform: translateY(0); }

        /* ===========================
           HERO SECTION
        =========================== */
        #hero { min-height: 80vh; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding-top: 100px; }
        #hero-typing {
            font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 800; color: var(--primary);
            border-right: 3px solid var(--secondary); white-space: nowrap; overflow: hidden;
            width: 0; animation: typing 3s steps(20) forwards, blink .75s infinite;
        }
        @keyframes typing { to { width: 100%; } }
        @keyframes blink { 50% { border-color: transparent; } }
        
        .rotate-text-container { height: 30px; overflow: hidden; margin-top: 20px; position: relative; width: 100%; }
        .rotate-text { animation: rotateText 9s infinite; }
        .rotate-item { height: 30px; line-height: 30px; color: var(--text); font-size: 1.2rem; }
        @keyframes rotateText {
            0%, 30% { transform: translateY(0); }
            33%, 63% { transform: translateY(-30px); }
            66%, 96% { transform: translateY(-60px); }
            100% { transform: translateY(0); }
        }

        /* ===========================
           GALLERY (MASONRY)
        =========================== */
        .gallery { column-count: 3; column-gap: 20px; }
        .masonry-img {
            width: 100%; border-radius: 15px; margin-bottom: 20px; cursor: zoom-in;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1); transition: transform 0.3s;
            break-inside: avoid; display: block;
        }
        .masonry-img:hover { transform: scale(1.02); }
        @media(max-width: 768px) { .gallery { column-count: 2; } }
        @media(max-width: 480px) { .gallery { column-count: 1; } }

        /* Lightbox */
        #lightbox {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); display: none; justify-content: center; align-items: center;
            z-index: 2000; opacity: 0; transition: opacity 0.3s;
        }
        #lightbox.active { opacity: 1; }
        #light-img { max-width: 90%; max-height: 90%; border-radius: 8px; box-shadow: 0 0 30px rgba(255,255,255,0.2); }

        /* ===========================
           TIMELINE
        =========================== */
        .timeline { position: relative; margin: 40px 0; }
        .timeline::before {
            content: ""; position: absolute; left: 50%; top: 0; bottom: 0; width: 3px;
            background: var(--accent); transform: translateX(-50%);
        }
        .timeline-item { width: 50%; padding: 20px 40px; position: relative; box-sizing: border-box; }
        .timeline-item.left { left: 0; text-align: right; }
        .timeline-item.right { left: 50%; text-align: left; }
        
        .timeline-dot {
            position: absolute; width: 16px; height: 16px; background: var(--secondary);
            border-radius: 50%; top: 25px; z-index: 2; border: 3px solid #fff;
        }
        .timeline-item.left .timeline-dot { right: -8px; }
        .timeline-item.right .timeline-dot { left: -8px; }

        .timeline-content {
            background: rgba(255,255,255,0.9); padding: 20px; border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08); position: relative;
        }
        .timeline-date { font-size: 0.85rem; color: var(--secondary); font-weight: bold; margin-top: 8px; display: block; }

        @media(max-width: 768px) {
            .timeline::before { left: 20px; }
            .timeline-item { width: 100%; padding-left: 50px; padding-right: 10px; text-align: left !important; }
            .timeline-item.left, .timeline-item.right { left: 0; }
            .timeline-item.left .timeline-dot, .timeline-item.right .timeline-dot { left: 12px; right: auto; }
        }

        /* ===========================
           INTERACTIVE ELEMENTS
        =========================== */
        /* Message Bottle */
        .msg-grid { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; }
        .msg-card {
            background: var(--bg-glass); backdrop-filter: blur(8px); padding: 20px;
            border-radius: 16px; width: 280px; box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            animation: floatMsg 6s ease-in-out infinite;
        }
        @keyframes floatMsg { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

        /* Music Player */
        .player-ui {
            background: rgba(255,255,255,0.85); padding: 25px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(55, 85, 55, 0.15); text-align: center;
        }
        input[type="range"] { width: 100%; accent-color: var(--primary); cursor: pointer; }
        .control-btn {
            background: var(--primary); color: white; border: none; padding: 10px 30px;
            border-radius: 50px; font-size: 1rem; cursor: pointer; margin-top: 15px;
            transition: transform 0.2s;
        }
        .control-btn:active { transform: scale(0.95); }

        /* Night Mode */
        body.night-mode {
            background: #0a0f0a; color: #e0e0e0;
            --bg-glass: rgba(30, 30, 30, 0.8);
            --text: #cccccc;
            --primary: #8fb88f;
        }
        body.night-mode nav { background: rgba(0,0,0,0.8); }
        body.night-mode .card, body.night-mode .timeline-content { background: rgba(40,40,40,0.8); color: #ddd; }
        
        /* Utility */
        #scroll-progress { position: fixed; top: 0; left: 0; height: 3px; background: var(--secondary); width: 0%; z-index: 9999; }
        .toast {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.8); color: white; padding: 12px 24px;
            border-radius: 30px; font-size: 0.9rem; z-index: 10001; opacity: 0; transition: opacity 0.3s;
        }
    </style>
</head>
<body>

<!-- Loading Screen -->
<div id="loading-screen">
    <div id="loading-title">XuanRou Ã— Koala</div>
    <div id="loading-sub">Loading Sweet Memories...</div>
</div>

<!-- Background Layers -->
<div id="dynamic-bg">
    <div class="fog-layer"></div>
    <div class="fog-layer" style="animation-duration: 45s; opacity: 0.5; animation-direction: reverse;"></div>
    <div id="night-stars"></div>
</div>

<!-- Scroll Progress -->
<div id="scroll-progress"></div>
<!-- Navigation -->
<nav>
    <div class="logo">XuanRou Ã— Koala</div>
    <div class="links">
        <a href="#home" class="nav-link">é¦–é </a>
        <a href="#story" class="nav-link">æ•…äº‹</a>
        <a href="#photos" class="nav-link">ç…§ç‰‡</a>
        <a href="#timeline" class="nav-link">æ™‚é–“è»¸</a>
        <a href="#diary" class="nav-link">æ—¥è¨˜</a>
        <a href="#music" class="nav-link">éŸ³æ¨‚</a>
    </div>
    <div class="hamburger" onclick="toggleMenu()">â˜°</div>
    <div id="mobile-menu">
        <a href="#home" class="nav-link" onclick="toggleMenu()">é¦–é </a>
        <a href="#story" class="nav-link" onclick="toggleMenu()">æ•…äº‹</a>
        <a href="#photos" class="nav-link" onclick="toggleMenu()">ç…§ç‰‡</a>
        <a href="#timeline" class="nav-link" onclick="toggleMenu()">æ™‚é–“è»¸</a>
        <a href="#diary" class="nav-link" onclick="toggleMenu()">æ—¥è¨˜</a>
        <a href="#music" class="nav-link" onclick="toggleMenu()">éŸ³æ¨‚</a>
    </div>
</nav>

<!-- Hero Section -->
<section id="home">
    <div id="hero">
        <div style="display:inline-block">
            <div id="hero-typing">æ­¡è¿å¦³ï¼Œç‘„æŸ”</div>
        </div>
        <div class="rotate-text-container">
            <div class="rotate-text">
                <div class="rotate-item">é€™è£¡ï¼Œæ˜¯æˆ‘å°ˆé–€ç‚ºå¦³é ç•™çš„åœ°æ–¹ã€‚</div>
                <div class="rotate-item">å¦³ä¸éœ€è¦å¾ˆä¹–ï¼Œå¦³åªéœ€è¦æ˜¯çœŸå¯¦çš„å¦³ã€‚</div>
                <div class="rotate-item">ç„¡è«–å¦³æ€æ¨£ï¼Œæˆ‘éƒ½é‚„æ˜¯åœ¨é€™è£¡ã€‚</div>
            </div>
        </div>
    </div>
</section>

<!-- Story Section -->
<section id="story">
    <div class="section-title">å¯«çµ¦å¦³çš„ä¸€æ®µè©±</div>
    <div class="card fade">
        <p>ç‘„æŸ”ï¼Œæˆ‘æƒ³æŠŠé€™å€‹åœ°æ–¹åšå¾—å¾ˆæ¼‚äº®ã€å¾ˆæº«æŸ”ã€å¾ˆä¹¾æ·¨ï¼Œä¸æ˜¯ç‚ºäº†èª°çœ‹ï¼Œè€Œæ˜¯ç‚ºäº†å¦³ã€‚</p>
        <br>
        <p>æˆ‘ä¸çŸ¥é“å¦³æ¯å¤©ç¶“æ­·äº†ä»€éº¼ã€é‡åˆ°ä»€éº¼ç…©æƒ±ã€æ‰¿å—äº†ä»€éº¼å£“åŠ›ï¼Œä½†æˆ‘çŸ¥é“â€”â€”<br>
        <b>å¦³å€¼å¾—ä¸€å€‹èƒ½è®“å¦³æ”¾é¬†å‘¼å¸çš„åœ°æ–¹ã€‚</b></p>
        <br>
        <p>ä¸ç®¡å¦³å¿ƒæƒ…å¥½æˆ–ä¸å¥½ã€ç´¯æˆ–ä¸ç´¯ã€æƒ³ç¬‘æˆ–æƒ³æ‰çœ¼æ·šï¼Œæˆ‘å¸Œæœ›å¦³å›åˆ°é€™è£¡æ™‚ï¼Œéƒ½èƒ½è¦ºå¾—ï¼šã€Œå—¯ï¼Œæœ‰äººåœ¨ç‚ºæˆ‘ä¿ç•™ä½ç½®ã€‚ã€</p>
        <br>
        <p>é€™å€‹ç¶²ç«™ä¸æ˜¯æµªæ¼«ï¼Œæ˜¯æˆ‘å°å¦³çš„åœ¨æ„ã€‚æ˜¯æˆ‘é¡˜æ„é™ªå¦³ã€é¡˜æ„ç†è§£å¦³ã€é¡˜æ„èŠ±æ™‚é–“åœ¨å¦³èº«ä¸Šçš„è­‰æ˜ã€‚</p>
        <br>
        <p>ç„¡è«–å¦³ä»€éº¼æ¨£å­ã€ä»€éº¼å¿ƒæƒ…ã€ä»€éº¼ç‹€æ…‹â€”â€”<b>æˆ‘éƒ½é¡˜æ„æ¥ä½ã€‚</b></p>
    </div>
</section>

<!-- About Us Section -->
<section id="about">
    <div class="card fade" style="display: flex; flex-wrap: wrap; gap: 30px; align-items: center;">
        <div style="flex: 1; min-width: 280px;">
            <h2 style="color:var(--primary); margin-bottom: 15px;">æˆ‘ Ã— å¦³</h2>
            <p>æˆ‘å–œæ­¡çš„å¾ä¾†ä¸æ˜¯å®Œç¾ï¼Œè€Œæ˜¯å¦³çœŸå¯¦çš„æ¨£å­ã€‚<br><br>
            å¦³ç”Ÿæ°£çš„æ™‚å€™ã€å´©æ½°çš„æ™‚å€™ã€æƒ³å“­çš„æ™‚å€™ã€ç´¯åˆ°ä¸æƒ³è¬›è©±çš„æ™‚å€™â€”â€”æˆ‘éƒ½è¦ºå¾—å¦³å¾ˆçœŸã€å¾ˆå¯æ„›ã€å¾ˆå€¼å¾—è¢«å¿ƒç–¼ã€‚<br>
            æˆ‘ä¸æœƒè¦æ±‚å¦³ä¸€ç›´é–‹å¿ƒã€ä¸€ç›´æ‡‚äº‹ï¼›æˆ‘å¸Œæœ›å¦³åšè‡ªå·±ï¼Œç„¶å¾ŒçŸ¥é“ï¼š<br>
            <b>ä¸ç®¡å¦³æ€æ¨£ï¼Œæˆ‘éƒ½é‚„æ˜¯åœ¨é€™è£¡ã€‚</b></p>
        </div>
        <div style="flex: 1; min-width: 280px; text-align: center;">
            <!-- è«‹ç¢ºèªåœ–ç‰‡è·¯å¾‘æ­£ç¢ºï¼Œè‹¥ç„¡åœ–ç‰‡æœƒé¡¯ç¤ºæ›¿ä»£æ¡† -->
            <img src="photo6.jpg" alt="Our Photo" style="width: 100%; max-width: 350px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.15);" onerror="this.style.display='none'">
        </div>
    </div>
</section>

<!-- Photos Section -->
<section id="photos">
    <div class="section-title">æˆ‘å€‘çš„ç…§ç‰‡</div>
    <div class="gallery fade">
        <!-- åœ–ç‰‡åŠ å…¥ onerror è™•ç†ï¼Œé˜²æ­¢ç ´åœ– -->
        <img src="photo1.jpg" class="masonry-img" onclick="openLightbox(this.src)" onerror="this.src='https://placehold.co/400x600/e8f5e8/355f35?text=Photo+1'">
        <img src="photo2.jpg" class="masonry-img" onclick="openLightbox(this.src)" onerror="this.src='https://placehold.co/400x500/e8f5e8/355f35?text=Photo+2'">
        <img src="photo3.jpg" class="masonry-img" onclick="openLightbox(this.src)" onerror="this.src='https://placehold.co/400x400/e8f5e8/355f35?text=Photo+3'">
        <img src="photo4.jpg" class="masonry-img" onclick="openLightbox(this.src)" onerror="this.src='https://placehold.co/400x700/e8f5e8/355f35?text=Photo+4'">
        <img src="photo5.jpg" class="masonry-img" onclick="openLightbox(this.src)" onerror="this.src='https://placehold.co/400x500/e8f5e8/355f35?text=Photo+5'">
        <img src="photo6.jpg" class="masonry-img" onclick="openLightbox(this.src)" onerror="this.src='https://placehold.co/400x600/e8f5e8/355f35?text=Photo+6'">
    </div>
</section>

<!-- Timeline Section -->
<section id="timeline">
    <div class="section-title">æˆ‘å€‘çš„æ™‚é–“è»¸</div>
    <div class="timeline fade">
        <div class="timeline-item left">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
                <h3>ç¬¬ä¸€æ¬¡èŠå¤©</h3>
                <p>é‚£å¤©é–‹å§‹ï¼Œæˆ‘å°±è¦ºå¾—å¦³æ˜¯ä¸€å€‹ç‰¹åˆ¥çš„äººã€‚</p>
                <span class="timeline-date">æŸå¹´ æŸæœˆ æŸæ—¥</span>
            </div>
        </div>
        <div class="timeline-item right">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
                <h3>ç¬¬ä¸€æ¬¡è¦‹é¢</h3>
                <p>çœ‹åˆ°å¦³çš„é‚£ä¸€ç¬é–“ï¼Œæˆ‘å…¶å¯¦æ¯”è¡¨é¢æ›´ç·Šå¼µã€‚</p>
                <span class="timeline-date">æŸæœˆ æŸæ—¥</span>
            </div>
        </div>
        <div class="timeline-item left">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
                <h3>ç¬¬ä¸€æ¬¡ä¸€èµ·å‡ºå»</h3>
                <p>é‚£æ™‚æˆ‘å¿ƒè£¡çš„æ„Ÿè¦ºæ˜¯ï¼šå¦‚æœå¯ä»¥ï¼Œæˆ‘æƒ³ä¸€ç›´é™ªå¦³ã€‚</p>
                <span class="timeline-date">æŸæ—¥</span>
            </div>
        </div>
        <div class="timeline-item right">
            <div class="timeline-dot"></div>
            <div class="timeline-content">
                <h3>æˆ‘å€‘ç¾åœ¨</h3>
                <p>ä¸æ˜¯å®Œç¾ï¼Œä½†çœŸå¯¦ã€å¦ç™½ã€‚æˆ‘æƒ³è¦çš„æœªä¾†ï¼Œå°±æ˜¯æœ‰å¦³çš„æœªä¾†ã€‚</p>
                <span class="timeline-date">ç¾åœ¨</span>
            </div>
        </div>
    </div>
</section>
<!-- Emotion Tabs -->
<section>
    <div class="section-title">æƒ…ç·’æ€¥æ•‘åŒ…</div>
    <div class="card fade" style="text-align: center;">
        <div style="display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-bottom:20px;">
            <button class="control-btn" onclick="showTab('angry')" style="background:#d9534f">ç”Ÿæ°£æ™‚</button>
            <button class="control-btn" onclick="showTab('sad')" style="background:#5bc0de">é›£éæ™‚</button>
            <button class="control-btn" onclick="showTab('happy')" style="background:#f0ad4e">é–‹å¿ƒæ™‚</button>
            <button class="control-btn" onclick="showTab('night')" style="background:#292b2c">ç¡å‰</button>
        </div>
        <div id="tab-content" style="font-size:1.1rem; color:var(--text); min-height: 80px; display:flex; align-items:center; justify-content:center;">
            ï¼ˆé»é¸ä¸€å€‹æŒ‰éˆ•ï¼Œçœ‹çœ‹æˆ‘æƒ³å°å¦³èªªä»€éº¼ â¤ï¼‰
        </div>
    </div>
</section>

<!-- Diary & Messages -->
<section id="diary">
    <div class="section-title">æ¯æ—¥å°èª</div>
    <div class="card fade" style="text-align:center;">
        <h3 style="color:var(--primary); margin-bottom:15px;">ä»Šå¤©æƒ³å°å¦³èªª</h3>
        <div id="diary-box" style="font-size:1.2rem; font-weight:bold; color:var(--text);"></div>
    </div>

    <div class="msg-grid fade" style="margin-top: 50px;">
        <div class="msg-card" style="animation-delay: 0s;">å¦³å…¶å¯¦æ¯”å¦³ä»¥ç‚ºçš„é‚„æ›´å€¼å¾—è¢«æ„›ã€‚</div>
        <div class="msg-card" style="animation-delay: 1s;">å¦³çš„å£æƒ…ç·’æˆ‘ä¹Ÿé¡˜æ„ä¸€èµ·æ‰›ã€‚</div>
        <div class="msg-card" style="animation-delay: 2s;">å¦‚æœä¸–ç•Œä¸æº«æŸ”ï¼Œé‚£æˆ‘å°å¦³æº«æŸ”ã€‚</div>
        <div class="msg-card" style="animation-delay: 3s;">å¦³ä¸ç”¨è¡¨ç¾å¾—å¾ˆå¥½ï¼Œæˆ‘åœ¨é€™è£¡ã€‚</div>
    </div>
</section>

<!-- Birthday Countdown -->
<section id="birthday">
    <div class="section-title">ç‘„æŸ”ç”Ÿæ—¥å€’æ•¸</div>
    <div class="card fade" style="text-align: center;">
        <div id="birthday-count" style="font-size: 1.5rem; font-weight: 800; color: var(--secondary);">è¨ˆç®—ä¸­...</div>
    </div>
</section>

<!-- Period Notice (Smart) -->
<div id="period-notice" class="fade" style="max-width: 800px; margin: 20px auto; padding: 15px; background: rgba(255,240,245,0.9); border-radius: 12px; text-align: center; color: #b74462; display: none;"></div>

<!-- Music Player -->
<section id="music">
    <div class="section-title">å°ˆå±¬éŸ³æ¨‚</div>
    <div class="card fade player-ui">
        <div id="song-name" style="font-weight:bold; margin-bottom:10px;">ä½ çŸ¥é“ä½ æ¯”æ™šéœå¥½çœ‹å— - Tr33</div>
        <!-- è«‹è¨˜å¾—å°‡éŸ³æ¨‚æª”æ¡ˆæ”¾åœ¨åŒä¸€è³‡æ–™å¤¾ -->
        <audio id="audio-player" src="ä½ çŸ¥é“ä½ æ¯”æ™šéœå¥½çœ‹å— - Tr33 (youtube).mp3"></audio>
        <input type="range" id="progress-bar" value="0" min="0" max="100">
        <div style="display:flex; justify-content:space-between; font-size:0.8rem; margin-top:5px;">
            <span id="current-time">0:00</span>
            <span id="total-time">0:00</span>
        </div>
        <button onclick="toggleMusic()" id="play-btn" class="control-btn">æ’­æ”¾ â–¶</button>
    </div>
</section>

<!-- Footer -->
<footer style="text-align: center; padding: 40px 20px; color: var(--text); font-size: 0.9rem; opacity: 0.8;">
    Â© 2025 ç„¡å°¾ç†Šç‚ºç‘„æŸ”è£½ä½œ Â· All Rights Reserved<br>
    <button onclick="toggleNightMode()" style="margin-top:15px; padding:5px 10px; border:1px solid var(--text); background:transparent; color:var(--text); border-radius:15px; cursor:pointer;">ğŸŒ™ åˆ‡æ›å¤œé–“æ¨¡å¼</button>
</footer>

<!-- Lightbox Container -->
<div id="lightbox" onclick="closeLightbox()">
    <img id="light-img" src="" alt="Full View">
</div>

<!-- Toast Notification -->
<div id="toast-container"></div>

<!-- ===========================
     JAVASCRIPT LOGIC
=========================== -->
<script>
    // --- 1. Loading Screen ---
    window.addEventListener('load', () => {
        setTimeout(() => {
            const loader = document.getElementById('loading-screen');
            loader.style.opacity = '0';
            setTimeout(() => { loader.style.display = 'none'; }, 1200);
            initVisualEffects(); // Start heavy animations after load
        }, 2000);
    });

    // --- 2. Scroll Animations (Intersection Observer) ---
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show');
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.fade').forEach(el => observer.observe(el));

    // --- 3. Navigation & UI ---
    function toggleMenu() {
        const menu = document.getElementById('mobile-menu');
        menu.classList.toggle('active');
    }

    function toggleNightMode() {
        document.body.classList.toggle('night-mode');
    }

    // --- 4. Lightbox ---
    function openLightbox(src) {
        const lb = document.getElementById('lightbox');
        const img = document.getElementById('light-img');
        img.src = src;
        lb.style.display = 'flex';
        setTimeout(() => lb.classList.add('active'), 10);
    }
    function closeLightbox() {
        const lb = document.getElementById('lightbox');
        lb.classList.remove('active');
        setTimeout(() => lb.style.display = 'none', 300);
    }

    // --- 5. Emotion Tabs ---
    function showTab(type) {
        const msgs = {
            angry: "å¦³ç”Ÿæ°£çš„æ™‚å€™ï¼Œæˆ‘ä¸æœƒèµ°ã€‚æˆ‘æœƒåœ¨å¦³æ—é‚Šç­‰å¦³å†·éœï¼Œä¹Ÿç­‰å¦³é¡˜æ„è¢«æŠ±ä½ã€‚",
            sad: "å¦³é›£éæ™‚ï¼Œæˆ‘ä¸æœƒå«å¦³å …å¼·ï¼Œæˆ‘æœƒå…ˆæŠ±ä½å¦³ï¼Œé™ªå¦³æŠŠé›£å—æ…¢æ…¢æ”¾ä¸‹ã€‚",
            happy: "å¦³é–‹å¿ƒçš„æ™‚å€™ï¼Œæˆ‘æœƒé»˜é»˜è¨˜ä½å¦³é‚£å€‹è¡¨æƒ…ï¼Œå› ç‚ºé‚£æ˜¯æˆ‘ä¸€å¤©è£¡æœ€æƒ³çœ‹çš„ç•«é¢ã€‚",
            night: "ç¡å‰æˆ‘æœ€æƒ³è·Ÿå¦³èªªçš„æ˜¯ï¼šå¦³ä»Šå¤©è¾›è‹¦äº†ï¼Œå¦³åšå¾—å¾ˆå¥½ã€‚æˆ‘åœ¨é€™è£¡ï¼Œæ™šå®‰ã€‚"
        };
        document.getElementById("tab-content").innerText = msgs[type];
    }

    // --- 6. Diary Randomizer ---
    const diarySentences = [
        "å¸Œæœ›å¦³ä»Šå¤©æ˜¯è¢«æº«æŸ”å°å¾…çš„ä¸€å¤©ã€‚",
        "å¦‚æœå¦³ç¾åœ¨å¾ˆç´¯ï¼Œé‚£æˆ‘é™ªå¦³ä¸€ä¸‹ï¼Œä¸è¬›è©±ä¹Ÿå¯ä»¥ã€‚",
        "å¦³ä¸éœ€è¦å¾ˆå®Œç¾ï¼Œæˆ‘å–œæ­¡çš„æ˜¯å¦³çœŸå¯¦çš„æ¨£å­ã€‚",
        "å¦³çš„ä¸–ç•Œå¶çˆ¾å¾ˆåµæ²’é—œä¿‚ï¼Œæˆ‘æœƒåœ¨å¦³éœä¸‹ä¾†çš„åœ°æ–¹ç­‰å¦³ã€‚",
        "å¦³å€¼å¾—è¢«æ„›ã€å€¼å¾—è¢«æŠ±ç·Šã€å€¼å¾—è¢«ç†è§£ã€‚"
    ];
    document.getElementById("diary-box").innerText = diarySentences[Math.floor(Math.random() * diarySentences.length)];

    // --- 7. Music Player ---
    const audio = document.getElementById("audio-player");
    const playBtn = document.getElementById("play-btn");
    const progressBar = document.getElementById("progress-bar");
    
    function toggleMusic() {
        if (audio.paused) {
            audio.play().then(() => {
                playBtn.innerHTML = "æš«åœ âšâš";
                showToast("ğŸµ éŸ³æ¨‚æ’­æ”¾ä¸­");
            }).catch(e => {
                showToast("âš ï¸ æ‰¾ä¸åˆ°éŸ³æ¨‚æª”æ¡ˆï¼Œè«‹ç¢ºèªæª”æ¡ˆåç¨±");
                console.error("Music play error:", e);
            });
        } else {
            audio.pause();
            playBtn.innerHTML = "æ’­æ”¾ â–¶";
        }
    }
    
    audio.addEventListener("timeupdate", () => {
        if(isNaN(audio.duration)) return;
        const pct = (audio.currentTime / audio.duration) * 100;
        progressBar.value = pct;
        document.getElementById("current-time").innerText = formatTime(audio.currentTime);
        document.getElementById("total-time").innerText = formatTime(audio.duration);
    });

    progressBar.addEventListener("input", () => {
        const time = (progressBar.value / 100) * audio.duration;
        audio.currentTime = time;
    });

    function formatTime(s) {
        const m = Math.floor(s / 60);
        const sec = Math.floor(s % 60).toString().padStart(2, "0");
        return `${m}:${sec}`;
    }

    // --- 8. Birthday Countdown ---
    function updateBirthday() {
        const now = new Date();
        const currentYear = now.getFullYear();
        let bday = new Date(`${currentYear}-05-19T00:00:00`); // å‡è¨­ç”Ÿæ—¥æ˜¯ 5/19
        
        if (now > bday) bday.setFullYear(currentYear + 1);
        
        const diff = bday - now;
        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const m = Math.floor((diff / (1000 * 60)) % 60);
        
        document.getElementById("birthday-count").innerHTML = `${d}å¤© ${h}æ™‚ ${m}åˆ†`;
    }
    setInterval(updateBirthday, 60000); // Update every minute to save battery
    updateBirthday();

    // --- 9. Period Notice (Logic Optimized) ---
    function checkPeriod() {
        // é€™è£¡å¯ä»¥åŠ å…¥ç°¡å–®çš„æ—¥æœŸé‚è¼¯ï¼Œæˆ–æ˜¯ä¿ç•™åŸæœ¬çš„ UserAgent åˆ¤æ–·
        const isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
        const box = document.getElementById("period-notice");
        
        if (isIOS) {
            box.innerHTML = "â¤ï¸ ç‘„æŸ”ï¼Œå¦‚æœé€™å¹¾å¤©èº«é«”ä¸èˆ’æœï¼Œè¨˜å¾—è·Ÿæˆ‘èªªï¼Œæˆ‘æœƒå¹«å¦³æ‰›è‘—ã€‚";
            box.style.display = "block";
        }
    }
    checkPeriod();

    // --- 10. Visual Effects (Particles) ---
    function initVisualEffects() {
        const bg = document.getElementById("dynamic-bg");
        // Limit particles on mobile for performance
        const count = window.innerWidth < 768 ? 15 : 30; 
        
        for(let i=0; i<count; i++) {
            let p = document.createElement("div");
            p.classList.add("particle");
            p.style.width = Math.random() * 5 + 2 + "px";
            p.style.height = p.style.width;
            p.style.left = Math.random() * 100 + "%";
            p.style.bottom = "-10px";
            p.style.animationDuration = (Math.random() * 10 + 10) + "s";
            p.style.animationDelay = (Math.random() * 5) + "s";
            bg.appendChild(p);
        }
    }

    // --- 11. Scroll Progress ---
    window.addEventListener("scroll", () => {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        document.getElementById("scroll-progress").style.width = scrolled + "%";
    });

    // --- Utility: Toast ---
    function showToast(msg) {
        const div = document.createElement("div");
        div.className = "toast";
        div.innerText = msg;
        document.body.appendChild(div);
        // Trigger reflow
        void div.offsetWidth; 
        div.style.opacity = 1;
        setTimeout(() => {
            div.style.opacity = 0;
            setTimeout(() => div.remove(), 300);
        }, 3000);
    }
</script>
</body>
</html>
