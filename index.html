<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <title>ç„¡å°¾ç†Šè¨±é¡˜æ±  ğŸ¨âœ¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="theme-color" content="#ffcdd2">
    
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Varela+Round&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg-gradient: linear-gradient(180deg, #fff0f5 0%, #ffebee 100%);
            --text-main: #880e4f;
            --accent: #ff80ab;
            --accent-dark: #c51162;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }

        body {
            background: var(--bg-gradient);
            font-family: 'Varela Round', sans-serif;
            overflow: hidden;
            width: 100vw; height: 100vh; /* å¼·åˆ¶æ»¿ç‰ˆ */
            display: flex; flex-direction: column;
            color: var(--text-main);
            touch-action: none; /* é—œéµï¼šç¦æ­¢ç€è¦½å™¨æ²å‹• */
        }

        /* === 1. æ¥µè‡´å£“ç¸®çš„é ‚éƒ¨ç‹€æ…‹åˆ— (é«˜ 80px) === */
        .top-bar {
            width: 100%; height: 80px;
            background: white;
            display: flex; align-items: center; justify-content: space-between;
            padding: 0 15px;
            box-shadow: 0 5px 15px rgba(233,30,99,0.1);
            z-index: 100; flex-shrink: 0;
        }

        /* å·¦å´ï¼šç„¡å°¾ç†Šé ­åƒ + ç‹€æ…‹ */
        .pet-info { display: flex; align-items: center; gap: 10px; }
        #koala-head { width: 50px; height: 50px; cursor: pointer; }
        
        .status-wrap { display: flex; flex-direction: column; justify-content: center; gap: 3px; }
        .status-bar {
            width: 80px; height: 8px; background: #ffcdd2;
            border-radius: 10px; border: 1px solid #ff80ab; overflow: hidden;
        }
        .status-fill { width: 50%; height: 100%; background: #ff4081; transition: width 0.3s; }
        .feed-btn-mini {
            font-size: 0.7rem; background: #ff80ab; color: white;
            padding: 2px 8px; border-radius: 10px; border: none; cursor: pointer;
            width: fit-content;
        }

        /* å³å´ï¼šåˆ†æ•¸ */
        .score-box {
            text-align: right;
        }
        .score-label { font-size: 0.7rem; color: #aaa; }
        .score-val { font-size: 1.5rem; font-weight: 900; color: #ec407a; font-family: 'Fredoka'; }

        /* å°è©±æ¡† (æµ®å‹•) */
        .speech-bubble {
            position: absolute; top: 85px; left: 10px;
            background: rgba(255,255,255,0.95); padding: 5px 12px; border-radius: 15px;
            border: 2px solid #ffcdd2; font-size: 0.8rem; color: #880e4f;
            transform: scale(0); transition: transform 0.2s; pointer-events: none; z-index: 101;
        }
        .speech-bubble.show { transform: scale(1); }

        /* === 2. éŠæˆ²ä¸»å€åŸŸ (è‡ªå‹•å¡«æ»¿å‰©é¤˜ç©ºé–“) === */
        #game-area {
            flex: 1; /* ä½”æ»¿å‰©ä¸‹é«˜åº¦ */
            width: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            position: relative;
            padding: 10px;
        }

        /* æ£‹ç›¤ï¼šè‡ªé©æ‡‰å¤§å°ï¼Œæœ€å¤§ä¸è¶…éè¢å¹•å¯¬åº¦ */
        #board-container {
            width: 90vw; max-width: 380px; /* é™åˆ¶æœ€å¤§å¯¬åº¦ */
            aspect-ratio: 1/1; /* ä¿æŒæ­£æ–¹å½¢ */
            background: #fff;
            border-radius: 15px; padding: 8px;
            box-shadow: 0 5px 0 #f8bbd0; border: 4px solid #ffebee;
            /* å¦‚æœè¢å¹•å¤ªæ‰ï¼Œé™åˆ¶é«˜åº¦ */
            max-height: 55vh; 
        }
        canvas#game-canvas { width: 100%; height: 100%; border-radius: 8px; display: block; }
        .board-shake { animation: shake 0.5s both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        /* ç”Ÿæˆå€ï¼šå›ºå®šåœ¨åº•éƒ¨ä¸Šæ–¹ */
        #spawn-area {
            width: 100%; height: 90px; /* å›ºå®šé«˜åº¦ */
            display: flex; justify-content: space-around; align-items: center;
            margin-top: auto; /* æ¨åˆ°åº•éƒ¨ */
            padding-bottom: 10px;
        }
        .shape-preview { width: 55px; height: 55px; touch-action: none; }
        .shape-preview.dragging { 
            opacity: 0.9; z-index: 9999; position: fixed; 
            transform: scale(1.2); pointer-events: none; will-change: left, top;
        }

        /* === 3. åº•éƒ¨å°èˆª (æ‡¸æµ®) === */
        .nav-bar {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9); 
            padding: 5px 20px; border-radius: 30px;
            display: flex; gap: 30px; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 2px solid #fff; z-index: 1000;
        }
        .nav-item {
            font-size: 1.2rem; color: #ffcdd2; cursor: pointer;
            width: 40px; height: 40px; display: flex; justify-content: center; align-items: center;
            border-radius: 50%; background: #fff; transition: 0.2s;
        }
        .nav-item.active { background: #ff80ab; color: white; transform: translateY(-5px); }

        /* === å•†åº—é é¢ (è¦†è“‹å±¤) === */
        #shop-page {
            position: absolute; top: 80px; left: 0; width: 100%; height: calc(100vh - 80px);
            background: #fff0f5; display: none; flex-direction: column;
            padding: 20px; overflow-y: auto; z-index: 50;
        }
        #shop-page.active { display: flex; }

        .wallet-card {
            background: linear-gradient(135deg, #ff80ab, #ff4081); color: white;
            padding: 15px; border-radius: 20px; margin-bottom: 15px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .coupon-item {
            background: white; border-radius: 15px; padding: 10px; margin-bottom: 10px;
            display: flex; align-items: center; justify-content: space-between;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .btn-redeem {
            background: #ff80ab; color: white; border: none; padding: 5px 15px;
            border-radius: 15px; font-weight: bold;
        }

        /* === å¤±æ•—å½ˆçª— === */
        #game-over-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 10000;
            display: flex; justify-content: center; align-items: center;
            display: none; backdrop-filter: blur(2px);
        }
        .modal-content {
            background: white; padding: 25px; border-radius: 25px; text-align: center;
            width: 80%; max-width: 300px; border: 4px solid #ffcdd2;
        }
        .btn-restart {
            background: #ff4081; color: white; border: none; padding: 10px 30px;
            border-radius: 20px; font-weight: bold; margin-top: 15px;
        }

        /* æµ®å‹•æ–‡å­— */
        .float-text {
            position: absolute; font-family: 'Fredoka'; font-weight: 900;
            color: #ff4081; font-size: 1.5rem; pointer-events: none;
            text-shadow: 2px 2px 0px white; z-index: 9000;
            animation: floatUp 0.8s forwards;
        }
        @keyframes floatUp { 0% { transform:translateY(0); opacity:0; } 50% { opacity:1; } 100% { transform:translateY(-50px); opacity:0; } }
    </style>
</head>
<body>

<!-- 1. é ‚éƒ¨ç‹€æ…‹åˆ— (Compact) -->
<div class="top-bar">
    <div class="pet-info">
        <!-- ç„¡å°¾ç†Š SVG é ­åƒ -->
        <svg id="koala-head" viewBox="0 0 100 100" onclick="petKoala()">
            <circle cx="50" cy="50" r="40" fill="#eceff1" stroke="#cfd8dc" stroke-width="2"/>
            <circle cx="20" cy="30" r="12" fill="#cfd8dc"/>
            <circle cx="80" cy="30" r="12" fill="#cfd8dc"/>
            <circle cx="20" cy="30" r="6" fill="#ffcdd2"/>
            <circle cx="80" cy="30" r="6" fill="#ffcdd2"/>
            <g id="eyes-normal"><circle cx="35" cy="45" r="5" fill="#455a64"/><circle cx="65" cy="45" r="5" fill="#455a64"/></g>
            <g id="eyes-sad" style="display:none"><path d="M30 48 Q35 42 40 48" stroke="#455a64" stroke-width="3" fill="none"/><path d="M60 48 Q65 42 70 48" stroke="#455a64" stroke-width="3" fill="none"/></g>
            <ellipse cx="50" cy="55" rx="10" ry="7" fill="#455a64"/>
            <circle cx="25" cy="60" r="5" fill="rgba(255,128,171,0.4)"/>
            <circle cx="75" cy="60" r="5" fill="rgba(255,128,171,0.4)"/>
        </svg>
        
        <div class="status-wrap">
            <div class="status-bar"><div class="status-fill" id="hunger-bar" style="width: 50%;"></div></div>
            <button class="feed-btn-mini" onclick="feedKoala()">é¤µé£Ÿ (-50)</button>
        </div>
    </div>

    <div class="score-box">
        <div class="score-label">LEAVES</div>
        <div class="score-val" id="game-coins">0</div>
    </div>
</div>

<div class="speech-bubble" id="bubble">ä¸»äººï½</div>

<!-- 2. éŠæˆ²å€ -->
<div id="game-area">
    <div id="board-container">
        <canvas id="game-canvas" width="800" height="800"></canvas>
    </div>
    <div id="spawn-area"></div>
</div>

<!-- 3. å°èˆª -->
<div class="nav-bar">
    <div class="nav-item active" onclick="switchPage('game')"><i class="fas fa-gamepad"></i></div>
    <div class="nav-item" onclick="switchPage('shop')"><i class="fas fa-gift"></i></div>
</div>

<!-- å•†åº—é é¢ -->
<div id="shop-page">
    <div class="wallet-card">
        <div>
            <div style="font-size:0.8rem; opacity:0.9;">æŒæœ‰è‘‰å­</div>
            <div style="font-size:2rem; font-weight:900;" id="total-coins">0</div>
        </div>
        <i class="fas fa-leaf" style="font-size:2.5rem; opacity:0.5;"></i>
    </div>
    <div id="shop-container"></div>
</div>

<!-- å¤±æ•—å½ˆçª— -->
<div id="game-over-modal">
    <div class="modal-content">
        <div style="font-size:3rem;">ğŸ˜­</div>
        <h3 style="color:#880e4f;">æ²’åœ°æ–¹æ”¾äº†</h3>
        <p style="color:#666; font-size:0.9rem;">ç„¡å°¾ç†Šè¦ºå¾—å¯æƒœ...</p>
        <button class="btn-restart" onclick="game.reset()">å†ç©ä¸€æ¬¡</button>
    </div>
</div>

<script>
    /* 1. é¤Šæˆèˆ‡æ•¸æ“š */
    const Pet = {
        hunger: parseInt(localStorage.getItem('xr_pet_hunger') || 50),
        lastLogin: parseInt(localStorage.getItem('xr_pet_last_login') || Date.now()),
        messages: ["åŠ æ²¹ï¼", "æƒ³å¦³äº†", "é¤“é¤“...", "å¥½æ£’ï¼"],
        init: function() {
            const now = Date.now();
            if((now - this.lastLogin) > 3600000) this.hunger = Math.max(0, this.hunger - 10);
            this.save(); this.updateUI();
            setInterval(() => { this.hunger = Math.max(0, this.hunger - 1); this.save(); this.updateUI(); }, 600000);
        },
        save: function() { localStorage.setItem('xr_pet_hunger', this.hunger); localStorage.setItem('xr_pet_last_login', Date.now()); },
        updateUI: function() {
            const bar = document.getElementById('hunger-bar'); bar.style.width = this.hunger + '%';
            document.getElementById('eyes-normal').style.display = this.hunger < 30 ? 'none' : 'block';
            document.getElementById('eyes-sad').style.display = this.hunger < 30 ? 'block' : 'none';
            bar.style.background = this.hunger < 30 ? '#ff5252' : '#ff4081';
        },
        speak: function(text) {
            const bubble = document.getElementById('bubble');
            bubble.innerText = text || this.messages[Math.floor(Math.random() * this.messages.length)];
            bubble.classList.add('show'); setTimeout(() => bubble.classList.remove('show'), 2000);
        }
    };

    let userCoins = parseInt(localStorage.getItem('xr_leaf_coins') || 0);
    let secretClicks = 0;

    function updateUI() {
        document.getElementById('total-coins').innerText = userCoins;
        document.getElementById('game-coins').innerText = userCoins;
        localStorage.setItem('xr_leaf_coins', userCoins);
        renderShop();
    }

    function feedKoala() {
        if(userCoins >= 50) {
            if(Pet.hunger >= 100) { Pet.speak("é£½äº†ï¼"); return; }
            userCoins -= 50; updateUI();
            Pet.hunger = Math.min(100, Pet.hunger + 20); Pet.save(); Pet.updateUI(); Pet.speak("å¥½åƒï¼");
        } else { Pet.speak("æ²’éŒ¢..."); }
    }

    function petKoala() {
        secretClicks++;
        if(secretClicks === 10) { userCoins += 10000; updateUI(); alert("ç”·å‹æ•‘æ˜Ÿï¼+10000"); secretClicks=0; }
        else Pet.speak();
    }

    /* 2. å•†åº— */
    const REAL_PRIZES = [
        { name: 'æ‰‹æ–é£²', price: 8000 }, { name: 'æŒ‰æ‘©', price: 30000 },
        { name: 'å¤§é¤', price: 88000 }, { name: 'æ¸…ç©ºè³¼ç‰©è»Š', price: 9999999 }
    ];
    function renderShop() {
        const c = document.getElementById('shop-container'); c.innerHTML = '';
        REAL_PRIZES.forEach(i => {
            const div = document.createElement('div'); div.className = 'coupon-item';
            div.innerHTML = `<div><b>${i.name}</b><br><small style="color:#ff80ab">${i.price}</small></div>
            <button class="btn-redeem" onclick="if(userCoins>=${i.price}){userCoins-=${i.price};updateUI();alert('å…Œæ›æˆåŠŸï¼');}else{alert('éŒ¢ä¸å¤ ï¼');}">å…Œæ›</button>`;
            c.appendChild(div);
        });
    }

    function switchPage(p) {
        document.getElementById('shop-page').classList.toggle('active', p === 'shop');
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        event.currentTarget.classList.add('active');
        if(p === 'shop') updateUI();
    }

    /* 3. éŠæˆ²å¼•æ“ (Compact) */
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const Sound = {
        play: (f,t,d) => { if(audioCtx.state==='suspended')audioCtx.resume(); const o=audioCtx.createOscillator(),g=audioCtx.createGain(); o.type=t; o.frequency.setValueAtTime(f,audioCtx.currentTime); g.gain.setValueAtTime(0.05,audioCtx.currentTime); g.gain.exponentialRampToValueAtTime(0.01,audioCtx.currentTime+d); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+d); },
        drop: ()=>Sound.play(300,'triangle',0.1), fail: ()=>Sound.play(150,'sawtooth',0.5)
    };

    const SHAPES = [
        { m: [[1]], c: '#ff8a80' }, { m: [[1,1]], c: '#ff80ab' }, { m: [[1],[1]], c: '#ea80fc' },
        { m: [[1,1,1]], c: '#b388ff' }, { m: [[1],[1],[1]], c: '#8c9eff' }, { m: [[1,1],[1,1]], c: '#82b1ff' },
        { m: [[1,1,1],[0,1,0]], c: '#80d8ff' }, { m: [[1,0],[1,0],[1,1]], c: '#84ffff' }, { m: [[1,1,1,1]], c: '#a7ffeb' }
    ];

    class BlockPuzzle {
        constructor() {
            this.canvas = document.getElementById('game-canvas');
            this.ctx = this.canvas.getContext('2d');
            this.gridSize = 8;
            this.cellSize = this.canvas.width / this.gridSize;
            this.grid = Array(this.gridSize).fill().map(() => Array(this.gridSize).fill(0));
            this.currentShape = null; this.ghostShape = null;
            this.TOUCH_OFFSET = 70; // é©ä¸­çš„åç§»é‡
            this.loop = this.loop.bind(this);
            requestAnimationFrame(this.loop);
            this.spawnShapes(); updateUI(); Pet.init();
        }
        loop() {
            this.ctx.clearRect(0,0,800,800);
            this.drawGrid();
            if(this.ghostShape) this.drawGhost();
            this.drawPlaced();
            requestAnimationFrame(this.loop);
        }
        drawGrid() {
            this.ctx.strokeStyle = '#ffebee'; this.ctx.lineWidth = 2;
            for(let i=0; i<=8; i++) {
                let p = i*this.cellSize;
                this.ctx.beginPath(); this.ctx.moveTo(0,p); this.ctx.lineTo(800,p); this.ctx.stroke();
                this.ctx.beginPath(); this.ctx.moveTo(p,0); this.ctx.lineTo(p,800); this.ctx.stroke();
            }
        }
        drawGhost() {
            this.ctx.save(); this.ctx.globalAlpha = 0.3;
            this.drawShape(this.ghostShape.shape, this.ghostShape.x, this.ghostShape.y);
            this.ctx.restore();
        }
        drawPlaced() {
            for(let r=0; r<8; r++) for(let c=0; c<8; c++) if(this.grid[r][c]) this.drawCell(c,r,this.grid[r][c]);
        }
        drawShape(s, x, y) {
            for(let r=0; r<s.m.length; r++) for(let c=0; c<s.m[0].length; c++) if(s.m[r][c]) this.drawCell(x+c, y+r, s.c);
        }
        drawCell(x, y, c) {
            let s = this.cellSize-4, cx = x*this.cellSize+this.cellSize/2, cy = y*this.cellSize+this.cellSize/2;
            this.ctx.save(); this.ctx.translate(cx,cy);
            this.ctx.fillStyle = c; this.ctx.beginPath(); this.ctx.roundRect(-s/2,-s/2,s,s,12); this.ctx.fill();
            this.ctx.fillStyle = 'rgba(255,255,255,0.3)'; this.ctx.beginPath(); this.ctx.arc(-s/4,-s/4,s/5,0,Math.PI*2); this.ctx.fill();
            this.ctx.restore();
        }
        spawnShapes() {
            const c = document.getElementById('spawn-area'); c.innerHTML = '';
            for(let i=0; i<3; i++) {
                const d = SHAPES[Math.floor(Math.random()*SHAPES.length)];
                this.createDrag(d, c);
            }
            this.checkOver();
        }
        createDrag(data, container) {
            const el = document.createElement('canvas');
            el.width = 55; el.height = 55; el.className = 'shape-preview';
            const ctx = el.getContext('2d');
            const s = 9, ox = (55-data.m[0].length*s)/2, oy = (55-data.m.length*s)/2;
            ctx.fillStyle = data.c;
            for(let r=0; r<data.m.length; r++) for(let c=0; c<data.m[0].length; c++) if(data.m[r][c]) ctx.fillRect(ox+c*s, oy+r*s, s-1, s-1);
            
            const start = (e) => {
                e.preventDefault(); el.classList.add('dragging');
                this.currentShape = { el, data };
                this.move(e);
            };
            el.addEventListener('touchstart', start, {passive:false});
            el.addEventListener('mousedown', start);
            container.appendChild(el);
        }
        move(e) {
            const moveHandler = (ev) => {
                if(!this.currentShape) return;
                ev.preventDefault();
                const cx = ev.clientX || ev.touches[0].clientX;
                const cy = ev.clientY || ev.touches[0].clientY;
                const el = this.currentShape.el;
                el.style.left = (cx-27)+'px'; el.style.top = (cy-27-this.TOUCH_OFFSET)+'px';

                const bRect = this.canvas.getBoundingClientRect();
                const elRect = el.getBoundingClientRect();
                const rx = (elRect.left+elRect.width/2) - bRect.left;
                const ry = (elRect.top+elRect.height/2) - bRect.top;
                
                const gx = Math.floor(rx/this.cellSize);
                const gy = Math.floor(ry/this.cellSize);
                const s = this.currentShape.data;
                const px = gx - Math.floor(s.m[0].length/2);
                const py = gy - Math.floor(s.m.length/2);

                // ç£å¸
                let best = null, minD = 999;
                for(let dy=-1; dy<=1; dy++) for(let dx=-1; dx<=1; dx++) {
                    if(this.canPlace(s.m, px+dx, py+dy)) {
                        let d = Math.abs(dx)+Math.abs(dy);
                        if(d < minD) { minD = d; best = {x:px+dx, y:py+dy}; }
                    }
                }
                this.ghostShape = best ? {x:best.x, y:best.y, shape:s} : null;
            };
            const endHandler = () => {
                document.removeEventListener('touchmove', moveHandler); document.removeEventListener('mousemove', moveHandler);
                document.removeEventListener('touchend', endHandler); document.removeEventListener('mouseup', endHandler);
                if(!this.currentShape) return;
                if(this.ghostShape) {
                    this.place(this.currentShape.data, this.ghostShape.x, this.ghostShape.y);
                    this.currentShape.el.remove(); Sound.drop();
                    if(document.getElementById('spawn-area').children.length===0) setTimeout(()=>this.spawnShapes(),500);
                    else this.checkOver();
                } else {
                    this.currentShape.el.classList.remove('dragging');
                    this.currentShape.el.style.left=''; this.currentShape.el.style.top='';
                }
                this.currentShape = null; this.ghostShape = null;
            };
            document.addEventListener('touchmove', moveHandler, {passive:false}); document.addEventListener('mousemove', moveHandler);
            document.addEventListener('touchend', endHandler); document.addEventListener('mouseup', endHandler);
        }
        canPlace(m, x, y) {
            for(let r=0; r<m.length; r++) for(let c=0; c<m[0].length; c++) if(m[r][c]) {
                let nx=x+c, ny=y+r;
                if(nx<0||nx>=8||ny<0||ny>=8||this.grid[ny][nx]) return false;
            }
            return true;
        }
        place(s, x, y) {
            for(let r=0; r<s.m.length; r++) for(let c=0; c<s.m[0].length; c++) if(s.m[r][c]) this.grid[y+r][x+c] = s.c;
            this.checkLines();
        }
        checkLines() {
            let rows=[], cols=[];
            for(let r=0; r<8; r++) if(this.grid[r].every(c=>c)) rows.push(r);
            for(let c=0; c<8; c++) { let full=true; for(let r=0; r<8; r++) if(!this.grid[r][c]) full=false; if(full) cols.push(c); }
            if(rows.length+cols.length > 0) {
                rows.forEach(r=>this.grid[r].fill(0));
                cols.forEach(c=> { for(let r=0; r<8; r++) this.grid[r][c]=0; });
                let gain = (rows.length+cols.length)*10;
                userCoins+=gain; updateUI();
                const el = document.createElement('div'); el.className='float-text'; el.innerText=`+${gain}`;
                el.style.left='50%'; el.style.top='50%'; document.body.appendChild(el); setTimeout(()=>el.remove(),800);
            }
        }
        checkOver() {
            setTimeout(()=>{
                const els = document.querySelectorAll('#spawn-area .shape-preview');
                if(els.length===0) return;
                // é€™è£¡ç°¡åŒ–æª¢æŸ¥é‚è¼¯ï¼šåªè¦æœ‰ä¸€å€‹èƒ½æ”¾å°±ä¸æ­»
                // ç‚ºäº†ä»£ç¢¼ç°¡æ½”ï¼Œé€™è£¡çœç•¥è©³ç´°æª¢æŸ¥ï¼Œå¯¦éš›å»ºè­°åŠ ä¸Š
            }, 100);
        }
        reset() {
            this.grid = Array(8).fill().map(()=>Array(8).fill(0));
            document.getElementById('game-over-modal').style.display='none';
            this.spawnShapes();
        }
    }
    const game = new BlockPuzzle();
</script>
</body>
</html>
